<ion-view title="Cadastro">
  <ion-content class="centerContent">
   
  <div class="info-meta" ng-class="{rodando: rodando}">
  	<h1>{{meta.nome}}</h1>
  	<p>{{meta.descricao}}</p>
  	<div class="progresso-barra" ng-show="!rodando">
  		<div class="left">0</div>
  		<div class="right">{{meta.minutos/60}}<span>horas</span></div>
  		<div class="barra">
	  		<div class="barra-concluida" ng-class="{'barra-ok': (meta.concluido/meta.minutos * 100) >= 100}" style="width:{{meta.concluido/meta.minutos * 100 > 100 ? 100 : (meta.concluido/meta.minutos * 100).toFixed(0) }}%"></div>
	  	</div>
	  	<p ng-show="meta.concluido > 0">{{(meta.concluido/meta.minutos * 100).toFixed(0)}}% concluido
      -
      {{meta.concluido_text}}</p>
  	</div>
  	<div ng-show="rodando">
  		<div id="label-time-meta">
	  		<div class="mini">TEMPO</div>
        <br>
	  		<div ng-show="horas==0">
          {{minutos < 10 ? "0"+minutos : minutos}}:{{segundos < 10 ? "0"+segundos : segundos}}
        </div>
        <div ng-show="horas > 0">
          {{horas < 10 ? "0"+horas : horas}}:{{minutos < 10 ? "0"+minutos : minutos}}<span>:{{segundos < 10 ? "0"+segundos : segundos}}</span>
        </div>
	  	</div>
	  	<div class="time-meta" degrees='angle' rotate>
	  		<div class="marcador"></div>
	  	</div>
  	</div>
  </div>

  <button class="button button-balanced button-big" ng-click="iniciar()" ng-show="!rodando">
    Iniciar atividade
  </button>
  <div class="meta-concluida" ng-show="meta.concluido/meta.minutos * 100 >= 100 && !rodando">
    <i class="icon ion-trophy"></i>
    Parabens você concluiu sua meta!
  </div>
  <button id="btStop" class="button button-assertive button-big" ng-click="parar()" ng-show="rodando">
    Parar atividade
  </button>

  </ion-content>
</ion-view>

<script id="my-popover.html" type="text/ng-template">
  <ion-popover-view>
    <ion-header-bar>
      <h1 class="title">Opções da meta</h1>
    </ion-header-bar>
    <ion-content>
      <ul class="list">
          <li class="item" ng-click="zerar()">
            Zerar horas concluídas
          </li>
          <li class="item" ng-click="excluir()">
            Excluir essa meta
          </li>
      </ul>
    </ion-content>
  </ion-popover-view>
</script>